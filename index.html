<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zaporium Key</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500&display=swap');
    body{margin:0;height:100vh;background:#000;color:#fff;font-family:'Orbitron',sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .container{background:#111;padding:40px 20px;border-radius:8px;border:1px solid #333;text-align:center;max-width:90%;box-sizing:border-box}
    h1{font-size:2rem;margin:0 0 10px;color:#fff;font-weight:500}
    .subtitle{color:#ccc;margin-bottom:30px;font-size:1rem}
    .key-box{background:#222;padding:15px;border:1px solid #444;border-radius:4px;margin:20px 0;font-size:1.2rem;letter-spacing:1px;word-break:break-all;color:#fff}
    .copy-btn{background:#007bff;color:#fff;border:none;padding:12px 30px;font-size:1rem;font-weight:500;border-radius:4px;cursor:pointer;margin:10px;transition:background .3s}
    .copy-btn:hover{background:#0056b3}
    .continue-btn{background:#fff;color:#000;border:none;padding:15px 40px;font-size:1.2rem;font-weight:500;border-radius:4px;cursor:pointer;margin:20px auto;display:block;width:80%;max-width:300px;transition:background .3s}
    .continue-btn:hover{background:#f0f0f0}
    .success{color:#28a745;margin:15px 0;font-size:1rem}
    .timer{color:#007bff;font-size:1rem;margin:10px 0;font-weight:500}
    .desc{color:#aaa;font-size:0.9rem;line-height:1.4;margin:20px 0}
    .links a{color:#007bff;margin:0 10px;text-decoration:none;font-size:0.9rem}
    .footer{margin-top:20px;font-size:0.8rem;color:#666}
    .hidden{display:none}
    #notify{position:absolute;top:20px;left:50%;transform:translateX(-50%);background:#007bff;color:#fff;padding:10px 20px;border-radius:4px;font-weight:500;opacity:0;transition:opacity .3s;pointer-events:none;z-index:100}
    #notify.show{opacity:1}
    .error-box{border:1px solid #dc3545;color:#dc3545;background:#300;padding:20px;border-radius:4px;margin:20px 0}
  </style>
</head>
<body>
  <div class="container">
    <h1>ZAPORIUM</h1>
    <p class="subtitle">Your exclusive access key</p>

    <!-- Continue Screen (first time / expired) -->
    <div id="continueScreen">
      <p class="desc">
        Click continue, pop-ups/ads may show and they can be annoying,<br>
        but they directly support the creators of this link.
      </p>
      <button class="continue-btn" id="continueBtn">Continue</button>
    </div>

    <!-- Key Screen (only when valid key exists) -->
    <div id="keyScreen" class="hidden">
      <div id="keyDisplay" class="key-box">ZAP-XXXXX-XXXXX-XXXXX</div>
      <button class="copy-btn" onclick="copyKey()">COPY KEY</button>
      <div id="timer" class="timer">Time left: 24:00:00</div>
      <p class="success">Success! Use in Zaporium Hub</p>
      <div class="links"><a href="#">YouTube</a><a href="#">Discord</a><a href="#">TikTok</a></div>
      <p class="footer">Do not share</p>
    </div>

    <div id="soldOut" class="hidden error-box">
      <strong>All keys have been claimed.</strong><br><br>
      Contact the owner for restock.
    </div>

    <div id="notify">Key copied successfully!</div>
  </div>

  <script>
    const LOOT_LINK = "https://lootdest.org/s?ZS40VyJq"; // Your working link
    const ALL_KEYS = [
      "ZAP-1A2B3C-4D5E6F-G7H8I9","ZAP-9X8K7M-3N2P1Q-W4E5R6","ZAP-7V6B5N-4M3L2K-J1H9G8",
      "ZAP-5T4R3E-2W1QA9-S8D7F6","ZAP-CHEYT25-WIN99X-ELITE1","ZAP-NEON404-CYBER9-XMAS25",
      "ZAP-ULTRA77-LEGEND1-ALPHA9","ZAP-OMEGA99-SECRET0-HACK3R","ZAP-XMAS2025-GIFT01-VIP77",
      "ZAP-CYBER111-PROMAX9-KEY001","ZAP-FINAL555-OWNER77-2025X","ZAP-GLOW999-NIGHTX-CORE77",
      "ZAP-ICE777-FIRE999-VOID001","ZAP-QUANTUM25-REALM9-KEY002","ZAP-ETHEREAL-GLITCH7-NOVA25",
      "ZAP-VOID888-PULSE9-STAR001","ZAP-CRYPTIC7-MYSTIC9-KEY003","ZAP-ORACLE25-LEGACY7-ELITE9",
      "ZAP-PHOENIX9-REBORN25-KEY004","ZAP-SHADOWX-LIGHT9-CORE002","ZAP-TITAN777-MEGA9-KEY005",
      "ZAP-APEX2025-ULTIMA7-KEY006","ZAP-ZENITH9-ABYSS25-KEY007","ZAP-INFINITE7-ETERNAL9-KEY008",
      "ZAP-COSMIC25-NEBULA9-KEY009","ZAP-STELLAR7-GALAXY9-KEY010","ZAP-LUNAR999-SOLAR777-KEY011",
      "ZAP-ECLIPSE25-DARKMATR-KEY012","ZAP-AURORA9-BOREAL7-KEY013","ZAP-METEOR25-COMET9-KEY014",
      "ZAP-QUASAR7-PULSAR9-KEY015","ZAP-BLACKHOLE25-KEY016","ZAP-SUPERNOVA9-KEY017",
      "ZAP-EXODUS25-GENESIS9-KEY018","ZAP-ODYSSEY7-ATLANTIS9-KEY019","ZAP-VALHALLA25-KEY020",
      "ZAP-OLYMPUS9-KEY021","ZAP-ASGARD25-MIDGARD9-KEY022","ZAP-HEAVEN7-HELL9-KEY023",
      "ZAP-PARADISE25-KEY024","ZAP-NIRVANA9-KEY025","ZAP-SATORI25-ENLIGHT9-KEY026",
      "ZAP-KARMA777-LUCKY9-KEY027","ZAP-DESTINY25-FATE9-KEY028","ZAP-LEGENDX-MYTHIC9-KEY029",
      "ZAP-DRAGON25-PHOENIX9-KEY030","ZAP-TIGER777-WOLF9-KEY031","ZAP-FALCON25-EAGLE9-KEY032",
      "ZAP-SHARK777-KRAKEN9-KEY033","ZAP-CYBORG25-ANDROID9-KEY034","ZAP-ROBOTIC7-MECH9-KEY035",
      "ZAP-NANOBOT25-KEY036","ZAP-QUANTUMX-KEY037","ZAP-HYPERDRIVE9-KEY038",
      "ZAP-WARP777-TELEPORT9-KEY039","ZAP-MATRIX25-GLITCH9-KEY040","ZAP-CODEX777-KEY041",
      "ZAP-ARCANE9-MAGIC25-KEY042","ZAP-RUNE777-SPELL9-KEY043","ZAP-ENCHANT25-KEY044",
      "ZAP-ALCHEMY9-GOLD25-KEY045","ZAP-ELIXIR777-KEY046","ZAP-POTION25-KEY047",
      "ZAP-CRYSTAL9-DIAMOND25-KEY048","ZAP-EMERALD7-RUBY9-KEY049","ZAP-SAPPHIRE25-KEY050",
      "ZAP-PLATINUM9-KEY051","ZAP-TITANIUM25-KEY052","ZAP-ADAMANT7-KEY053",
      "ZAP-MYTHRIL9-KEY054","ZAP-ORICHALC25-KEY055","ZAP-VIBRANIUM9-KEY056",
      "ZAP-INFINITY25-KEY057","ZAP-ETERNITY9-KEY058","ZAP-FOREVER25-KEY059",
      "ZAP-IMMORTAL9-KEY060","ZAP-GODMODE25-KEY061","ZAP-OVERLORD9-KEY062",
      "ZAP-EMPEROR25-KEY063","ZAP-KING777-QUEEN9-KEY064","ZAP-ROYAL25-KEY065",
      "ZAP-CROWN9-KEY066","ZAP-THRONE25-KEY067","ZAP-LEGACY9-KEY068",
      "ZAP-DYNASTY25-KEY069","ZAP-EMPIRE9-KEY070","ZAP-KINGDOM25-KEY071",
      "ZAP-REALM777-KEY072","ZAP-DOMAIN9-KEY073","ZAP-TERRITORY25-KEY074",
      "ZAP-FORTRESS9-KEY075","ZAP-CITADEL25-KEY076","ZAP-BASTION9-KEY077",
      "ZAP-STRONGHOLD25-KEY078","ZAP-HAVEN9-KEY079","ZAP-SANCTUARY25-KEY080",
      "ZAP-PARADOX9-KEY081","ZAP-ANOMALY25-KEY082","ZAP-ENIGMA9-KEY083",
      "ZAP-RIDDLE25-KEY084","ZAP-MYSTERY9-KEY085","ZAP-SECRET25-KEY086",
      "ZAP-HIDDEN9-KEY087","ZAP-FORBIDDEN25-KEY088","ZAP-ANCIENT9-KEY089",
      "ZAP-PRIMAL25-KEY090","ZAP-ORIGIN9-KEY091","ZAP-GENESIS25-KEY092",
      "ZAP-ALPHA9-KEY093","ZAP-OMEGA25-KEY094","ZAP-BEGIN25-END9-KEY095",
      "ZAP-FIRST777-LAST9-KEY096","ZAP-ZERO25-ONE9-KEY097","ZAP-NULL9-VOID25-KEY098",
      "ZAP-FINAL25-ULTIMATE9-KEY099","ZAP-ABSOLUTE25-KEY100"
    ];

    const STORAGE_KEY = 'zaporium_used_keys_final';
    const DURATION = 24 * 60 * 60 * 1000;
    let timer;

    function format(ms) {
      let h = Math.floor(ms / 3600000).toString().padStart(2,'0');
      let m = Math.floor((ms % 3600000) / 60000).toString().padStart(2,'0');
      let s = Math.floor((ms % 60000) / 1000).toString().padStart(2,'0');
      return `${h}:${m}:${s}`;
    }

    function updateTimer() {
      const gen = parseInt(localStorage.getItem('keyGeneratedAt') || '0');
      const left = DURATION - (Date.now() - gen);
      if (left <= 0) {
        clearInterval(timer);
        localStorage.removeItem('myZaporiumKey');
        localStorage.removeItem('keyGeneratedAt');
        showContinueScreen();
        return;
      }
      document.getElementById('timer').textContent = `Time left: ${format(left)}`;
    }

    function showKeyScreen(key) {
      document.getElementById('keyDisplay').textContent = key;
      document.getElementById('continueScreen').classList.add('hidden');
      document.getElementById('keyScreen').classList.remove('hidden');
      clearInterval(timer);
      timer = setInterval(updateTimer, 1000);
      updateTimer();
    }

    function showContinueScreen() {
      document.getElementById('keyScreen').classList.add('hidden');
      document.getElementById('continueScreen').classList.remove('hidden');
    }

    function claimNewKey() {
      let used = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); // ← FIXED: JSON.parse
      const available = ALL_KEYS.filter(k => !used.includes(k));
      if (available.length === 0) {
        document.getElementById('continueScreen').classList.add('hidden');
        document.getElementById('soldOut').classList.remove('hidden');
        return;
      }
      const newKey = available[Math.floor(Math.random() * available.length)];
      used.push(newKey);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(used));
      localStorage.setItem('myZaporiumKey', newKey);
      localStorage.setItem('keyGeneratedAt', Date.now().toString());
      showKeyScreen(newKey);
    }

    function copyKey() {
      navigator.clipboard.writeText(document.getElementById('keyDisplay').textContent).then(() => {
        const n = document.getElementById('notify');
        n.classList.add('show');
        setTimeout(() => n.classList.remove('show'), 2200);
      });
    }

    document.getElementById('continueBtn').onclick = () => window.open(LOOT_LINK, '_blank');

    // User came back from LootLabs → give key
    if (window.location.search.includes('verified=true')) {
      history.replaceState(null, null, window.location.pathname);
      claimNewKey();
    }

    // MAIN LOGIC
    const savedKey = localStorage.getItem('myZaporiumKey');
    const genTime = parseInt(localStorage.getItem('keyGeneratedAt') || '0');

    if (savedKey && ALL_KEYS.includes(savedKey) && (Date.now() - genTime < DURATION)) {
      showKeyScreen(savedKey);
    } else {
      localStorage.removeItem('myZaporiumKey');
      localStorage.removeItem('keyGeneratedAt');
      showContinueScreen();
    }
  </script>
</body>
</html>
